function deleteItem(n,t,i){$.ajax({type:"DELETE",url:n,data:{id:i},dataType:"text",success:function(n,i){i==="success"&&$(t).remove()}})}function getComments(n,t){inCallBack||(inCallBack=!0,$.ajax({url:t,method:"post",dataType:"html",data:{itemId:itemIden,Time:n.toJSON()},success:function(n){dateTimeSend=new Date;n!==""&&$("#comment-wrapper").append(n);inCallBack=!1}}))}function OnCommentSuccess(){getComments(dateTimeSend,"/Comment/CommentPage/")}function PrevPage(n,t){isEnd||(page++,$.ajax({url:n,method:"post",dataType:"html",data:{itemId:itemIden,Time:t,Page:page},success:function(n){n!==""?$("#comment-wrapper").prepend(n):isEnd=!0}}))}function updateLike(n){let r=!1,t=$(n.target),u=t.prev(),i=Number(u.text()),f=t.closest(".message").attr("id");t.hasClass(liked)?(r=!0,--i):++i;u.text(i);t.toggleClass(liked);$.post("/Comment/UpdateLike/",{commentId:f,oldLikeState:r},function(){})}let dateTimeSend=new Date,dateTimeLoad=dateTimeSend.toJSON(),itemIden=$("#ItemIdentificator").val();const timeInterval=5e3;let inCallBack=!1,page=-1,isEnd=!1;const liked="liked";PrevPage("/Comment/PreviousPage/",dateTimeLoad);setInterval(OnCommentSuccess,timeInterval);$("#ItemId").val(itemIden);$("#comment-wrapper").scroll(function(){Math.trunc($("#comment-wrapper").scrollTop()===0)&&PrevPage("/Comment/PreviousPage/",dateTimeLoad)});