function getComments(n,t){inCallBack||(inCallBack=!0,$.post(t,{itemId:itemIden,Time:n.toJSON()},function(n){dateTimeSend=new Date;n!==""&&$("#comment-wrapper").append(n);inCallBack=!1}))}function OnCommentSuccess(){getComments(dateTimeSend,"/Comment/CommentPage/")}function PrevPage(n,t){isEnd||callBackPrev||(callBackPrev=!0,page++,$.post(n,{itemId:itemIden,Time:t,Page:page},function(n){n!==""?$("#comment-wrapper").prepend(n):isEnd=!0;callBackPrev=!1}))}function updateLike(n){let r=!1,t=$(n.target),u=t.prev(),i=Number(u.text()),f=t.closest(".message").attr("id");t.hasClass(liked)?(r=!0,--i):++i;u.text(i);t.toggleClass(liked);$.post("/Comment/UpdateLike/",{commentId:f,oldLikeState:r},function(){})}let dateTimeSend=new Date,dateTimeLoad=dateTimeSend.toJSON(),itemIden=$("#ItemIdentificator").val();const timeInterval=5e3;let inCallBack=!1,page=-1,isEnd=!1,callBackPrev=!1;const liked="liked";PrevPage("/Comment/PreviousPage/",dateTimeLoad);setInterval(OnCommentSuccess,timeInterval);$("#ItemId").val(itemIden);$("#comment-wrapper").scroll(function(){$("#comment-wrapper").scrollTop()<10&&PrevPage("/Comment/PreviousPage/",dateTimeLoad)});