@model IEnumerable<Item>

@{
    if (Model != null)
    {
        bool isAdmin = User.IsInRole("Admin");
        bool hasAccess = isAdmin || Model.ElementAt(0).Collection.User.UserName == User.Identity.Name;
        foreach (var item in Model)
        {
            <tr id="@item.ItemId">
                <td>@item.Name</td>
                @{
                    foreach (var field in item.AddItems)
                    {
                        if (field.AddCollectionFields.Type == CollectionFieldType.stringField ||
                        field.AddCollectionFields.Type == CollectionFieldType.dateField)
                        {
                            <td>@field.Value</td>
                        }

                    }

                    <td class="d-flex justify-content-around">
                        <a asp-controller="Item" class="text-success" asp-action="ItemPage" style="text-decoration:underline" asp-route-id="@item.ItemId">Details</a>
                        @{
                            if (hasAccess)
                            {
                                <a asp-controller="Item" class="text-danger" asp-action="Update" style="text-decoration:underline" asp-route-id="@item.ItemId">Update</a>
                                <a class="delete-link text-warning" style="text-decoration:underline">Delete</a>
                            }
                        }
                    </td>
                }
            </tr>
        }
    }
}
